(window["webpackJsonpgame-maker"]=window["webpackJsonpgame-maker"]||[]).push([[0],{331:function(e,t,n){e.exports=n(537)},336:function(e,t,n){},459:function(e,t,n){},537:function(e,t,n){"use strict";n.r(t);var a,r=n(0),i=n.n(r),c=n(24),o=n.n(c),s=(n(336),n(60)),u=n(81),l=n(10),d=n.n(l),m=n(13),f=n(287),p=n(585),h=n(196),b=n(307),v=n(586),j=n(23),g=n(26);!function(e){e.text="text",e.number="number",e.datetime="datetime",e.foreignkey="foreignkey",e.unknown="unknown",e.select="select",e.tomanyTable="tomany-table"}(a||(a={}));var O,y,E=function(){function e(t){Object(j.a)(this,e),this.schemaList=void 0,t.forEach(function(e){e.extra&&e.extra.default&&(e.value=e.extra.default)}),this.schemaList=t}return Object(g.a)(e,[{key:"merge",value:function(e){this.schemaList=this.schemaList.map(function(t){if(e[t.name]){var n=e[t.name];if(t.widget==a.select){var r=t.extra&&t.extra.choices&&t.extra.choices.find(function(e){return e.value===n});t.choice=r}else if(t.widget==a.foreignkey){var i=n;t.choice=i,t.value=n.value}else t.value=n}return t})}},{key:"onSubmit",value:function(){var e={};return this.schemaList.filter(function(e){return!e.readonly&&e.widget!==a.tomanyTable}).forEach(function(t){return e[t.name]=t.value}),e}}]),e}(),w=n(33),x=n(32),k=n(34),S=function(){function e(t){Object(j.a)(this,e),this.schemaName=void 0,this.schemaName=t}return Object(g.a)(e,[{key:"merge",value:function(e,t){return[]}}]),e}();!function(e){e[e.image=0]="image",e[e.qrScan=1]="qrScan"}(O||(O={})),function(e){e[e.getInput=0]="getInput",e[e.getImage=1]="getImage"}(y||(y={}));var C=function(e){function t(e,n,a){var r;return Object(j.a)(this,t),(r=Object(w.a)(this,Object(x.a)(t).call(this,a))).actionTypes=void 0,r.actionDone=void 0,r.schemaName=void 0,r.schemaName=a,r.actionTypes=e,r.actionDone=n,r}return Object(k.a)(t,e),Object(g.a)(t,null,[{key:"merge",value:function(e,t){return e.map(function(e){return t.forEach(function(t){t.schemaName==e.name&&(e.action=t)}),e})}}]),t}(S),P=function(e){function t(e,n){var a;return Object(j.a)(this,t),(a=Object(w.a)(this,Object(x.a)(t).call(this,n))).iconData=void 0,a.schemaName=void 0,a.iconData=e,a.schemaName=n,a}return Object(k.a)(t,e),Object(g.a)(t,null,[{key:"merge",value:function(e,t){return e.map(function(e){return t.forEach(function(t){t.schemaName==e.name&&(e.icon=t)}),e})}}]),t}(S),Q=n(584),D=n(116),I=n(605),q=n(543),L=(n(159),n(576));function _(e){var t=e.schema,n=e.onSaved;function a(){if(t.required&&void 0===t.value)return{content:"This field is required",pointing:"below"}}return t.validations&&t.validations.length&&t.validations.length.maximum&&t.validations.length.maximum>300?i.a.createElement("div",null,i.a.createElement(I.a.TextArea,{"data-testid":"input-field",label:t.label,error:a(),onChange:function(e,t){var a=t.value;n(a)},defaultValue:t.value}),t.extra&&t.extra.help&&i.a.createElement(D.a,{color:"blue"},t.extra.help)):i.a.createElement("div",null,i.a.createElement(I.a.Input,{"data-testid":"input-field",type:t.name.includes("password")?"password":void 0,control:L.a,label:t.label,error:a(),onChange:function(e,t){var a=t.value;n(a)},defaultValue:t.value}),t.extra&&t.extra.help&&i.a.createElement(D.a,{color:"blue"},t.extra.help))}var N=n(577);function U(e){var t=e.schema,n=e.onSaved;return i.a.createElement(I.a.Select,{"data-testid":"select-field",control:N.a,label:t.label,options:t.extra&&t.extra.choices?t.extra.choices.map(function(e){return{text:e.label,value:e.value,key:e.label}}):[],value:t.value,onChange:function(e,t){var a=t.value;return n(a)},placeholder:t.value?t.value:t.extra&&t.extra.default})}var T=n(27),R=n(609),B=n(117),z=n(38),M=n.n(z),A=n(611),V=n(582),W=n(583);function J(e){var t=e.schema,n=e.onSaved,a=e.url,c=Object(r.useState)(),o=Object(T.a)(c,2),s=o[0],u=o[1],l=Object(r.useState)(),f=Object(T.a)(l,2),p=f[0],h=f[1],b=Object(r.useState)(t.choice&&t.choice.value),v=Object(T.a)(b,2),j=v[0],g=v[1],O=Object(r.useState)(!1),y=Object(T.a)(O,2),E=(y[0],y[1]),w=Object(r.useState)(-1),x=Object(T.a)(w,2),k=x[0],S=x[1];function C(e){return"".concat(a,"/").concat(e)}var P=function(){var e=Object(m.a)(d.a.mark(function e(){var n,a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.extra){e.next=6;break}return n=C(t.extra.related_model&&t.extra.related_model.replace("-","_")+"/"),e.next=4,M.a.get(n);case 4:return a=e.sent,e.abrupt("return",a.data);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(m.a)(d.a.mark(function e(){var n,a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.extra){e.next=6;break}return n=C(t.extra.related_model&&t.extra.related_model.replace("-","_")+"/"),e.next=4,M.a.request({method:"OPTIONS",url:n});case 4:a=e.sent,h(a.data.fields);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(m.a)(d.a.mark(function e(n){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E(!0),!t.extra){e.next=6;break}return a=C(t.extra.related_model&&t.extra.related_model.replace("-","_")+"/"+j+"/"),e.next=5,M.a.patch(a,n);case 5:e.sent;case 6:E(!1);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(m.a)(d.a.mark(function e(n){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E(!0),!t.extra){e.next=6;break}return a=C(t.extra.related_model&&t.extra.related_model.replace("-","_")+"/"),e.next=5,M.a.post(a,n);case 5:e.sent;case 6:E(!1);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(R.a,null,i.a.createElement(R.a.Row,{columns:"equal"},i.a.createElement(R.a.Column,{width:10},i.a.createElement(B.a,{value:t.choice&&t.choice.value,labeled:!0,placeholder:"Select ".concat(t.label),fluid:!0,search:!0,selection:!0,onChange:function(t,a){var r=a.value;if(g(r),n(r),s){var i=s.find(function(e){return e.id===r});e.select({label:i.name,value:i.id})}},options:void 0!==s?s.map(function(e){return{key:e.id,text:e.name,value:e.id}}):t.choice?[{text:t.choice.label,key:t.choice.value,value:t.choice.value}]:[],onClick:Object(m.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:(t=e.sent)&&u(t);case 4:case"end":return e.stop()}},e)}))})),i.a.createElement(R.a.Column,null,i.a.createElement(q.a,{icon:"add",color:"blue",onClick:Object(m.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S(0),e.next=3,Q();case 3:case"end":return e.stop()}},e)}))}),i.a.createElement(q.a,{icon:"edit",color:"blue",disabled:void 0===t.value,onClick:Object(m.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S(1),e.next=3,P();case 3:return t=e.sent,u(t),e.next=7,Q();case 7:case"end":return e.stop()}},e)}))}),i.a.createElement(A.a,{open:0===k,onClose:function(){return S(-1)},fullWidth:!0},i.a.createElement(V.a,null,"Add ",t.label),i.a.createElement(W.a,null,p&&i.a.createElement(F,{schemas:p,url:a,onSubmit:L}))),i.a.createElement(A.a,{open:1===k,onClose:function(){return S(-1)},fullWidth:!0},i.a.createElement(V.a,null,"Edit ",t.label),i.a.createElement(W.a,null,p&&i.a.createElement(F,{schemas:p,values:s&&s.find(function(e){return e.id===j}),url:a,onSubmit:I})))),t.required&&!t.value&&i.a.createElement(R.a.Column,null,i.a.createElement(D.a,{tag:!0,color:"red"},"Required"))))}var F=function(e){function t(e){var n;return Object(j.a)(this,t),(n=Object(w.a)(this,Object(x.a)(t).call(this,e))).onSaved=function(e,t){var r=e;t.widget===a.number&&(r=parseInt(e)),t.value=r,n.setState({schemaList:n.state.schemaList})},n.state={schemaList:void 0,submitSuccess:void 0,loading:!1},n}return Object(k.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.schemas,n=e.values,a=e.icons,r=e.actions,i=new E(t);if(n&&i.merge(n),a){var c=P.merge(i.schemaList,a);i.schemaList=c}if(r){var o=C.merge(i.schemaList,r);i.schemaList=o}this.setState({schemaList:i})}},{key:"renderField",value:function(e){var t=this;switch(e.widget){case a.select:return i.a.createElement(U,{schema:e,onSaved:function(n){return t.onSaved(n,e)}});case a.foreignkey:return i.a.createElement(J,{select:function(n){e.choice=n,t.setState({schemaList:t.state.schemaList})},schema:e,onSaved:function(n){return t.onSaved(n,e)},url:this.props.url});case a.text:case a.number:return i.a.createElement(_,{schema:e,onSaved:function(n){return t.onSaved(n,e)}});default:return i.a.createElement("div",{key:e.name})}}},{key:"render",value:function(){var e=this,t=this.state,n=t.schemaList,a=t.submitSuccess,r=t.loading;return i.a.createElement(Q.a,null,void 0!==a&&i.a.createElement(D.a,{basic:!0,color:a?"green":"red"},"Submitted ",a?"success":"failed"),i.a.createElement(I.a,{loading:r},n&&n.schemaList.filter(function(e){return!e.readonly}).map(function(t){return i.a.createElement(I.a.Field,{key:t.name},e.renderField(t))}),i.a.createElement(q.a,{loading:r,onClick:Object(m.a)(d.a.mark(function t(){var a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setState({loading:!0}),!n||!e.props.onSubmit){t.next=15;break}return t.prev=2,a=n.onSubmit(),t.next=6,e.props.onSubmit(a);case 6:e.setState({submitSuccess:!0}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),e.setState({submitSuccess:!1});case 12:return t.prev=12,e.setState({loading:!1}),t.finish(12);case 15:case"end":return t.stop()}},t,null,[[2,9,12,15]])}))},"Submit")))}}]),t}(r.Component),G="https://toebpt5v9j.execute-api.us-east-1.amazonaws.com/dev",H={baseURL:"".concat(G),signUpURL:"".concat(G,"/account/register/"),signInURL:"".concat(G,"/api/token/"),token:function(){return sessionStorage.getItem("access")}},X=function(e){function t(e){var n;return Object(j.a)(this,t),(n=Object(w.a)(this,Object(x.a)(t).call(this,e))).signIn=function(){var e=Object(m.a)(d.a.mark(function e(t){var a,r,i,c;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.state.errMsgs,e.prev=1,r=H.signInURL,e.next=5,M.a.post(r,t);case 5:i=e.sent,sessionStorage.setItem("access",i.data.access),n.setState({errMsgs:{},isLogin:!0}),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),c=e.t0.response.data,a.signIn=c,n.setState({errMsgs:a});case 15:case"end":return e.stop()}},e,null,[[1,10]])}));return function(t){return e.apply(this,arguments)}}(),n.signUp=function(){var e=Object(m.a)(d.a.mark(function e(t){var a,r,i;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=H.signUpURL,e.next=4,M.a.post(a,t);case 4:return e.sent,n.setState({errMsgs:{}}),e.next=8,n.signIn({username:t.username,password:t.password});case 8:e.next=17;break;case 10:e.prev=10,e.t0=e.catch(0),r=e.t0.response.data,(i=n.state.errMsgs).signUp=r,console.log(i),n.setState({errMsgs:i});case 17:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t){return e.apply(this,arguments)}}(),n.signOut=function(){sessionStorage.removeItem("access"),n.setState({isLogin:!1})},n.state={isLogin:!1,errMsgs:{},signIn:n.signIn,signUp:n.signUp,signOut:n.signOut},n}return Object(k.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){sessionStorage.getItem("access")&&this.setState({isLogin:!0})}},{key:"render",value:function(){return i.a.createElement($.Provider,{value:this.state},this.props.children)}}]),t}(r.Component),Y={isLogin:!1,signIn:function(){return Promise.resolve()},signUp:function(){return Promise.resolve()},signOut:function(){},errMsgs:{}},$=i.a.createContext(Y),K=n(608),Z=Object(f.a)(function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}),ee=[{name:"username",label:"User Name",readonly:!1,required:!0,widget:a.text},{name:"password",label:"Password",readonly:!1,required:!0,widget:a.text}];function te(){var e=Z(),t=Object(r.useContext)($),n=t.errMsgs,a=i.a.createElement(p.a,{item:!0,xs:12,sm:8,md:5,component:h.a,elevation:6,square:!0},i.a.createElement("div",{className:e.paper},i.a.createElement(b.a,{component:"h1",variant:"h5"},"Sign in"),i.a.createElement(F,{schemas:ee,url:"",onSubmit:function(){var e=Object(m.a)(d.a.mark(function e(n){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.signIn(n);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}),i.a.createElement(p.a,{container:!0},i.a.createElement(p.a,{item:!0},i.a.createElement(s.b,{to:"/signUp"},i.a.createElement("div",null,"Don't have an account? Sign Up"))),i.a.createElement(p.a,{item:!0,xs:12},function(){var e=[];for(var t in n.signIn)e.push(i.a.createElement(K.a,{key:t,negative:!0,header:"".concat(t),content:n.signIn[t]}));return e}()))));return i.a.createElement(p.a,{container:!0,component:"main",className:e.root},i.a.createElement(v.a,null),i.a.createElement(p.a,{item:!0,xs:!1,sm:4,md:7,className:e.image}),a)}var ne=n(613),ae=n(305),re=n(612),ie=n(593),ce=n(594),oe=n(595),se=n(289),ue=n.n(se),le=n(591),de=n(592),me=n(596),fe=n(587),pe=n(588),he=n(589),be=n(590);function ve(e){var t=e.title,n=e.description,a=e.navLink,r=e.onDelete;return i.a.createElement(fe.a,null,i.a.createElement(pe.a,null,i.a.createElement(b.a,{component:"h3"},t),i.a.createElement(b.a,{variant:"body2",component:"p"},n)),i.a.createElement(he.a,null,i.a.createElement(s.b,{to:a},i.a.createElement(be.a,null,"Edit")),i.a.createElement(be.a,{onClick:r},"Delete")))}var je=n(290),ge=n.n(je),Oe=n(291),ye=n.n(Oe),Ee=Object(f.a)(function(e){return Object(ne.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},display:{padding:10}})}),we=Object(ae.a)({palette:{primary:le.a,secondary:de.a}}),xe=[{name:"title",label:"Project name",readonly:!1,required:!0,widget:a.text}];function ke(){var e=Ee(),t=Object(r.useContext)($),n=Object(r.useState)(),a=Object(T.a)(n,2),c=a[0],o=a[1],s=Object(r.useState)(!1),u=Object(T.a)(s,2),l=u[0],f=u[1],h=Object(r.useState)(!1),v=Object(T.a)(h,2),j=v[0],g=v[1];if(!c){var O=H.baseURL,y=sessionStorage.getItem("access");M.a.get("".concat(O,"/game/"),{headers:{Authorization:"Bearer ".concat(y)}}).then(function(e){o(e.data)})}var E=function(){var e=Object(m.a)(d.a.mark(function e(t,n){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,g(!0),a=H.baseURL,e.next=6,M.a.delete("".concat(a,"/game/").concat(n,"/"));case 6:e.sent,c&&c.splice(t,1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),alert(e.t0);case 13:return e.prev=13,setTimeout(function(){g(!1),o(c)},200),e.finish(13);case 16:case"end":return e.stop()}},e,null,[[1,10,13,16]])}));return function(t,n){return e.apply(this,arguments)}}();return i.a.createElement(re.a,{theme:we},i.a.createElement("div",{className:e.root},i.a.createElement(ie.a,{position:"static",color:"primary"},i.a.createElement(ce.a,null,i.a.createElement(oe.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu"},i.a.createElement(ue.a,null)),i.a.createElement(b.a,{variant:"h6",className:e.title},"Home"),i.a.createElement(oe.a,{color:"inherit",onClick:function(){return f(!0)}},i.a.createElement(ge.a,null)),i.a.createElement(oe.a,{color:"inherit",onClick:function(){return t.signOut()}},i.a.createElement(ye.a,null)))),i.a.createElement(p.a,{container:!0,spacing:1,className:e.display},c&&c.map(function(e,t){return i.a.createElement(p.a,{item:!0,xs:6,sm:4,md:3,lg:2,key:"".concat(e.title,"-").concat(t)},i.a.createElement(ve,{title:e.title,description:"",onDelete:Object(m.a)(d.a.mark(function n(){return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:E(t,e.id);case 1:case"end":return n.stop()}},n)})),navLink:"edit/".concat(e.id)}))}))),i.a.createElement(A.a,{open:j,fullWidth:!0},i.a.createElement(W.a,null,i.a.createElement(me.a,null))),l&&i.a.createElement(A.a,{open:l,onClose:function(){f(!1)}},i.a.createElement(V.a,null,"Add new project"),i.a.createElement(W.a,null,i.a.createElement(F,{url:"",schemas:xe,onSubmit:function(){var e=Object(m.a)(d.a.mark(function e(t){var n,a,r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=H.baseURL,a=H.token,e.next=3,M.a.post("".concat(n,"/game/"),t,{headers:{Authorization:"Bearer ".concat(a())}});case 3:r=e.sent,c?(c.push(r.data),o(c)):o([r.data]),f(!1);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}))))}var Se=n(37),Ce=function(){function e(t){Object(j.a)(this,e),this.path=void 0,this.object=void 0,this.children=void 0,this.hasChildren=void 0;var n=t.path,a=t.object,r=t.hasChildren;this.path=n,this.object=a,this.children=[],this.hasChildren=void 0===r}return Object(g.a)(e,[{key:"create",value:function(){var e=Object(m.a)(d.a.mark(function e(){var t,n,a,r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=H.baseURL,n=H.token,a="".concat(t).concat(this.path,"/"),e.next=4,M.a.post(a,this.object,{headers:{Authorization:"Bearer ".concat(n())}});case 4:return r=e.sent,this.object=r.data,e.abrupt("return",this);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(m.a)(d.a.mark(function e(){var t,n,a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=H.baseURL,n=H.token,a="".concat(t).concat(this.path,"/").concat(this.object.id,"/"),e.next=4,M.a.delete(a,{headers:{Authorization:"Bearer ".concat(n())}});case 4:return e.sent,e.abrupt("return",this);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(m.a)(d.a.mark(function e(t){var n,a,r,i;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.object){e.next=10;break}return n=H.baseURL,a=H.token,r="".concat(n).concat(this.path,"/").concat(this.object.id,"/"),e.next=5,M.a.patch(r,t,{headers:{Authorization:"Bearer ".concat(a())}});case 5:return i=e.sent,this.object=t,e.abrupt("return",i.data);case 10:throw"No id in objecy";case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addChild",value:function(){var e=Object(m.a)(d.a.mark(function e(t){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.hasChildren&&this.children.push(t);case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteChild",value:function(){var e=Object(m.a)(d.a.mark(function e(t){var n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.hasChildren&&(n=this.children.findIndex(function(e){return e.object.id===t.object.id}))>-1&&this.children.splice(n,1);case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}();function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var Qe=function(e){function t(e){return Object(j.a)(this,t),Object(w.a)(this,Object(x.a)(t).call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(n,!0).forEach(function(t){Object(Se.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{path:"/selection",hasChildren:!1})))}return Object(k.a)(t,e),Object(g.a)(t,[{key:"build",value:function(){var e=Object(m.a)(d.a.mark(function e(t){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.object=t,e.abrupt("return",this);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return this.object}}]),t}(Ce);function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(n,!0).forEach(function(t){Object(Se.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var qe=function(e){function t(e){return Object(j.a)(this,t),Object(w.a)(this,Object(x.a)(t).call(this,Ie({},e,{path:"/question"})))}return Object(k.a)(t,e),Object(g.a)(t,[{key:"build",value:function(){var e=Object(m.a)(d.a.mark(function e(t){var n=this;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.selections&&t.selections.forEach(function(e){var t=new Qe({});t.build(e),n.addChild(t)}),this.object=Ie({},t,{selections:void 0}),e.abrupt("return",this);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Ie({},this.object,{selections:this.children.map(function(e){return e.toJSON()})})}}]),t}(Ce);function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(n,!0).forEach(function(t){Object(Se.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ne=function(e){function t(e){return Object(j.a)(this,t),Object(w.a)(this,Object(x.a)(t).call(this,_e({},e,{path:"/game"})))}return Object(k.a)(t,e),Object(g.a)(t,[{key:"build",value:function(){var e=Object(m.a)(d.a.mark(function e(t){var n=this;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.questions&&t.questions.forEach(function(){var e=Object(m.a)(d.a.mark(function e(t){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new qe({})).build(t),e.next=4,n.addChild(a);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),this.object=_e({},t,{questions:void 0}),e.abrupt("return",this);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return _e({},this.object,{questions:this.children.map(function(e){return e.toJSON()})})}}]),t}(Ce),Ue=function(e){function t(e){var n;return Object(j.a)(this,t),(n=Object(w.a)(this,Object(x.a)(t).call(this,e))).fetchData=function(){var e=Object(m.a)(d.a.mark(function e(t){var a,r,i;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=H.baseURL,r="".concat(a,"/game/").concat(t,"/"),e.next=4,M.a.get(r);case 4:return i=e.sent,console.log(i.data),e.next=8,n.build(i.data);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.select=function(e,t){n.setState({selectedSelectionPosition:void 0}),setTimeout(function(){n.setState({selectedSelectionPosition:e,selectedSelection:t})},10)},n.update=function(e){n.setState({game:e})},n.closePopUp=function(){n.setState({selectedSelectionPosition:void 0})},n.build=function(){var e=Object(m.a)(d.a.mark(function e(t){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Ne({}),e.next=3,a.build(t);case 3:n.setState({game:a});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.state={build:n.build,select:n.select,closePopUp:n.closePopUp,update:n.update,fetch:n.fetchData},n}return Object(k.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return i.a.createElement(Re.Provider,{value:this.state},this.props.children)}}]),t}(r.Component),Te={build:function(e){return Promise.resolve()},select:function(e,t){},closePopUp:function(){},update:function(){},fetch:function(){return Promise.resolve()}},Re=i.a.createContext(Te),Be=(n(459),n(614)),ze=n(597),Me=n(607),Ae=n(92);function Ve(e){var t=e.question,n=Object(r.useContext)(Re),a=n.selectedSelection,c=n.game,o=(n.update,function(e){if(c){var t=c.children.find(function(t){return t.object&&t.object.id===e});if(t&&t.object)return t.object.title}return""});return i.a.createElement("div",null,i.a.createElement(Be.a,null,t.children.map(function(e){return i.a.createElement(ze.a,{onClick:function(t){n.select(t.currentTarget,e)},style:{backgroundColor:(t=e.object&&e.object.id,a&&a.object&&t&&a.object.id===t?"yellow":void 0)},key:e.object&&e.object.id,value:e.object&&e.object.title,control:i.a.createElement(Me.a,null),label:i.a.createElement(b.a,null,e.object&&e.object.title," ",i.a.createElement(Ae.a,{name:"linkify"}),c&&e.object&&e.object.to_question&&o(e.object.to_question))});var t})))}var We=n(581),Je=n(599),Fe=n(600),Ge=n(598),He=n(578);function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(n,!0).forEach(function(t){Object(Se.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function $e(e){var t=Object(r.useState)(),n=Object(T.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(),s=Object(T.a)(o,2),u=s[0],l=s[1],f=Object(r.useState)(),p=Object(T.a)(f,2),h=p[0],b=p[1],v=Object(r.useState)(!1),j=Object(T.a)(v,2),g=j[0],O=j[1],y=Object(r.useContext)(Re),E=e.open,w=e.question,x=e.close,k=y.game,S=y.update;return i.a.createElement(A.a,{open:E,onClose:x,fullWidth:!0},i.a.createElement(V.a,null,"Edit ",w.object&&w.object.title),i.a.createElement(W.a,null,i.a.createElement(I.a,null,i.a.createElement(L.a,{fluid:!0,label:"Title",defaultValue:w.object&&w.object.title,onChange:function(e){return c(e.target.value)}}),i.a.createElement(He.a,{style:{marginTop:10},fullWidth:!0,defaultValue:w.object&&w.object.description,onChange:function(e,t){var n=t.value;return l(n)}}),i.a.createElement(L.a,{fluid:!0,style:{marginTop:10},label:"Image",defaultValue:w.object&&w.object.image,onChange:function(e){return b(e.target.value)}}))),i.a.createElement(Ge.a,null,i.a.createElement(q.a,{onClick:x},"Close"),i.a.createElement(q.a,{loading:g,color:"green",onClick:Object(m.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!w.object||!k){e.next=9;break}return O(!0),t=Ye({},w.object,{title:a||w.object.title,description:u||w.object.description,image:h||w.object.image}),w.object=t,e.next=6,w.update(t);case 6:S(k),x(),O(!1);case 9:case"end":return e.stop()}},e)}))},"Save")))}var Ke=n(604);function Ze(e){var t=e.open,n=e.onClose,a=e.onSubmit,r=e.schemas,c=e.title;return i.a.createElement(Ke.a,{open:t,onClose:n},i.a.createElement(V.a,null,c),i.a.createElement(Ke.a.Content,null,i.a.createElement(F,{schemas:r,onSubmit:a,url:""})))}function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(n,!0).forEach(function(t){Object(Se.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nt=Object(f.a)(function(e){var t;return Object(ne.a)({root:{position:"absolute",top:100,marginBottom:20,width:"100%",zIndex:130},card:(t={marginTop:20},Object(Se.a)(t,e.breakpoints.up("md"),{marginRight:280,marginLeft:280}),Object(Se.a)(t,e.breakpoints.up("lg"),{marginRight:340,marginLeft:340}),Object(Se.a)(t,"marginRight",100),Object(Se.a)(t,"marginLeft",100),t),media:{height:40,marginRight:40,marginLeft:40,paddingTop:"56.25%"},floadIcon:{height:30,width:30,margin:"10px 10px",color:"green"}})});function at(){var e=Object(r.useContext)(Re),t=Object(r.useState)(!1),n=Object(T.a)(t,2),c=n[0],o=n[1],s=Object(r.useState)(-1),u=Object(T.a)(s,2),l=u[0],f=u[1],p=Object(r.useState)(!1),h=Object(T.a)(p,2),v=h[0],j=h[1],g=Object(r.useState)(!1),O=Object(T.a)(g,2),y=O[0],E=O[1],w=e.game,x=e.update,k=nt(),S=w&&w.children.map(function(e){return{label:e.object&&e.object.title,value:e.object&&e.object.id}}),C=[{name:"title",label:"Question Title",readonly:!1,required:!0,widget:a.text},{name:"description",label:"Question Description",readonly:!1,required:!1,validations:{length:{maximum:1e3}},widget:a.text},{name:"to_question",label:"To Question",readonly:!1,required:!1,extra:{choices:S},validations:{length:{maximum:1e3}},widget:a.select}];return i.a.createElement("div",{className:k.root},w&&w.children.map(function(e,t){return i.a.createElement(We.a,{in:!0},i.a.createElement(fe.a,{className:k.card},i.a.createElement(pe.a,null,i.a.createElement(b.a,{component:"h5",variant:"h5"},e.object&&e.object.title,i.a.createElement(q.a,{style:{marginLeft:10},icon:"edit",size:"mini",circular:!0,onClick:function(){o(!0),f(t)}}),i.a.createElement(q.a,{style:{marginLeft:10},icon:"add",size:"mini",circular:!0,onClick:function(){f(t),j(!0)}}),i.a.createElement(q.a,{style:{marginLeft:10},icon:"trash",loading:y,size:"mini",circular:!0,onClick:Object(m.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Do you want to delete?")){t.next=10;break}return E(!0),t.next=5,e.delete();case 5:if(!w){t.next=8;break}return t.next=8,w.deleteChild(e);case 8:E(!1),x(w);case 10:case"end":return t.stop()}},t)}))})),i.a.createElement(b.a,{component:"p"},e.object&&e.object.description),e.object&&e.object.image&&i.a.createElement(Je.a,{className:k.media,image:e.object&&e.object.image}),e&&i.a.createElement(Ve,{question:e})),function(e){if(!e.children||0===e.children.length)return!0;var t=!0,n=!1,a=void 0;try{for(var r,i=e.children[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var c=r.value;if(c.object&&!c.object.to_question)return!0}}catch(o){n=!0,a=o}finally{try{t||null==i.return||i.return()}finally{if(n)throw a}}return!1}(e)?i.a.createElement(Fe.a,{title:"This is the end of the game"},i.a.createElement(D.a,{as:"a",color:"red",tag:!0,style:{marginBottom:10}},"End")):null))}),w&&l>=0&&i.a.createElement($e,{open:c,close:function(){return o(!1)},question:w.children[l]}),v&&i.a.createElement(Ze,{title:"Add Selection",open:v,onClose:function(){return j(!1)},schemas:C,onSubmit:function(){var e=Object(m.a)(d.a.mark(function e(t){var n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=9;break}return n=new Qe({object:tt({},t,{for_question:w.children[l].object.id})}),console.log(n.object),e.next=5,n.create();case 5:return e.next=7,w.children[l].addChild(n);case 7:j(!1),x(w);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}))}var rt=n(540),it=n(603),ct=n(606);function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function st(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(n,!0).forEach(function(t){Object(Se.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ut=Object(f.a)(function(e){return Object(ne.a)({title:{marginBottom:10},popup:{zIndex:400}})});function lt(){var e,t,n=Object(r.useContext)(Re),a=ut(),c=n.selectedSelection,o=n.selectedSelectionPosition,s=n.game,u=n.closePopUp,l=n.update;c&&c.object&&(e=c.object.title,t=null===c.object.to_question?void 0:c.object.to_question);var f=Object(r.useState)(),p=Object(T.a)(f,2),h=p[0],b=p[1],v=Object(r.useState)(),j=Object(T.a)(v,2),g=j[0],O=j[1],y=Object(r.useState)(!1),E=Object(T.a)(y,2),w=E[0],x=E[1];return i.a.createElement(rt.a,{open:void 0!==o,anchorEl:o,transition:!0,placement:"right",className:a.popup},function(n){var r=n.TransitionProps;return i.a.createElement(We.a,Object.assign({},r,{timeout:350}),c&&c.object&&s&&s.children&&i.a.createElement(ct.a,null,i.a.createElement(ct.a.Content,null,i.a.createElement(it.a,{fullWidth:!0,className:a.title,label:"Title",defaultValue:e,onChange:function(e){b(e.target.value)}}),i.a.createElement(B.a,{defaultValue:t,search:!0,selection:!0,fluid:!0,placeholder:"To Question",onChange:function(e,t){var n=t.value;O(n)},options:s.children.map(function(e){return{key:e.object&&e.object.title,value:e.object&&e.object.id,text:e.object&&e.object.title}})})),i.a.createElement(ct.a.Content,null,i.a.createElement(q.a,{fluid:!0,onClick:Object(m.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you want to delete?")||!s){e.next=5;break}return e.next=4,c.delete();case 4:s.children.forEach(function(){var e=Object(m.a)(d.a.mark(function e(t){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.object||t.object.id!==c.object.for_question){e.next=6;break}return e.next=3,t.deleteChild(c);case 3:return u(),u(),e.abrupt("return");case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}},e)}))},"Remove")),i.a.createElement(ct.a.Content,{extra:!0},i.a.createElement(q.a,{basic:!0,loading:w,color:"green",onClick:Object(m.a)(d.a.mark(function n(){var a;return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(x(!0),!c||!c.object){n.next=7;break}return a=st({},c.object,{title:h||e,to_question:g||t}),c.object=a,n.next=6,c.update(a);case 6:l(s);case 7:x(!1),u();case 9:case"end":return n.stop()}},n)}))},"Submit"),i.a.createElement(q.a,{basic:!0,color:"red",onClick:function(){u()}},"Close"))))})}function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(n,!0).forEach(function(t){Object(Se.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ft=Object(f.a)(function(e){return Object(ne.a)({floatButton:{position:"fixed",bottom:50,right:50,zIndex:300}})}),pt=[{name:"title",label:"Question Title",readonly:!1,required:!0,widget:a.text},{name:"description",label:"Question Description",readonly:!1,required:!1,validations:{length:{maximum:1e3}},widget:a.text},{name:"image",label:"Image URL",readonly:!1,required:!1,validations:{length:{maximum:200}},widget:a.text}];function ht(){var e=ft(),t=Object(r.useContext)(Re),n=Object(r.useState)(!1),a=Object(T.a)(n,2),c=a[0],o=a[1],s=t.game,u=t.update;return i.a.createElement("div",{className:e.floatButton},i.a.createElement(q.a,{color:"blue",onClick:function(){o(!0)}},i.a.createElement(Ae.a,{name:"edit"}),"Edit"),c&&i.a.createElement(Ze,{open:c,schemas:pt,title:"Add Question",onClose:function(){return o(!1)},onSubmit:function(){var e=Object(m.a)(d.a.mark(function e(t){var n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=7;break}return n=new qe({object:mt({},t,{game:s.object&&s.object.id})}),e.next=4,n.create();case 4:s.addChild(n),u(s),o(!1);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}))}var bt=n(601),vt=function(){function e(t){Object(j.a)(this,e),this.title=void 0,this.qid=void 0,this.image=void 0,this.selections=void 0,this.selected=void 0,this.parent=void 0,this.next=void 0,this.time_takes=void 0,this.description=void 0,this._isVisited=void 0;var n=t.title,a=t.description,r=t.qid,i=t.image,c=t.selections;this.title=n,this.description=a,this.qid=r,this.image=i,this.selections=c,this.selected=void 0,this.time_takes=0,this._isVisited=!1}return Object(g.a)(e,[{key:"update_time",value:function(e){this.time_takes=e}},{key:"select",value:function(e){this.deselect();var t=!0,n=!1,a=void 0;try{for(var r,i=this.selections[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var c=r.value;c.sid===e&&(this.selected=c,this.next=c.toQuestion,c.select(this))}}catch(o){n=!0,a=o}finally{try{t||null==i.return||i.return()}finally{if(n)throw a}}}},{key:"deselect",value:function(){this.selected&&(this.selected.deselect(),this.selected=void 0)}},{key:"toTree",value:function(){return this._isVisited?{name:this.title,attributes:{IsReplicated:"true"}}:(this._isVisited=!0,{name:this.title,attributes:{type:"Question",id:this.qid},children:this.selections.map(function(e){return e.toTree()}),nodeSvgShape:{shape:"circle",shapeProps:{r:10,fill:"#26c6da",stroke:"white"}}})}}]),e}(),jt=function(e){function t(e){var n;Object(j.a)(this,t),(n=Object(w.a)(this,Object(x.a)(t).call(this))).toQuestionID=void 0,n.toQuestion=void 0,n.title=void 0,n.sid=void 0,n.isSelected=void 0;var a=e.title,r=e.sid,i=e.toQuestionID;return n.title=a,n.sid=r,n.toQuestionID=i,n.isSelected=!1,n}return Object(k.a)(t,e),Object(g.a)(t,[{key:"select",value:function(e){this.isSelected=!0,this.toQuestion&&(this.toQuestion.parent=e)}},{key:"deselect",value:function(){this.isSelected=!1,this.toQuestion&&(this.toQuestion.selected&&(this.toQuestion.selected.isSelected=!1),this.toQuestion.selected=void 0,this.toQuestion.parent=void 0,this.toQuestion.next=void 0)}},{key:"toTree",value:function(){return{name:this.title,attributes:{type:"selection",id:this.sid},children:this.toQuestion?[this.toQuestion&&this.toQuestion.toTree()]:void 0,nodeSvgShape:{shape:"rect",shapeProps:{width:20,height:20,x:-10,y:-10,fill:"purple",stroke:"white"}}}}}]),t}(function e(){Object(j.a)(this,e)}),gt=function(){function e(){Object(j.a)(this,e),this.currentQuestion=void 0,this.root=void 0,this.title=void 0,this.survey_id=void 0,this.user_id=void 0}return Object(g.a)(e,[{key:"build",value:function(){var e=Object(m.a)(d.a.mark(function e(t){var n=this;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,a){n.title=t.title;var r=[];n.createQuestions(t,r),n.configQuestions(r),n.currentQuestion=r[0],n.root=r[0],e(n)}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"toTreeData",value:function(){var e=Object(m.a)(d.a.mark(function e(){var t=this;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){t.root&&e(t.root.toTree())}));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"setUserID",value:function(e){return this.user_id=e,this}},{key:"next",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.currentQuestion){var t=this.currentQuestion.time_takes;this.currentQuestion.update_time(t+e),this.currentQuestion=this.currentQuestion.next}}},{key:"prev",value:function(){this.currentQuestion=this.currentQuestion&&this.currentQuestion.parent}},{key:"isFinished",value:function(){if(this.currentQuestion){var e=!0,t=!1,n=void 0;try{for(var a,r=this.currentQuestion.selections[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){if(void 0!==a.value.toQuestion)return!1}}catch(i){t=!0,n=i}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}return!0}},{key:"hasNext",value:function(){return void 0!==(this.currentQuestion&&this.currentQuestion.next)}},{key:"hasPrev",value:function(){return void 0!==(this.currentQuestion&&this.currentQuestion.parent)}},{key:"select",value:function(e){if(this.currentQuestion){if(!(void 0!==this.currentQuestion.selections.find(function(t){return t.sid===e})))throw new Error("Selection not found");this.currentQuestion.select(e)}else console.log(this.currentQuestion)}},{key:"getMaxDepthOfTree",value:function(){var e=Object(m.a)(d.a.mark(function e(){var t=this;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){t.currentQuestion&&e(t.findMax(t.currentQuestion));e(0)}));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"onSubmit",value:function(e){if(!this.isFinished())throw new Error("Survey is not finished");if(this.currentQuestion){e&&this.currentQuestion.update_time(e);for(var t=this.root,n=[];void 0!==t;)t.selected&&n.push({time_takes:t.time_takes,sid:t.selected.sid}),t=t.next;return n}return[]}},{key:"findMax",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return 0;var n=0,a=!0,r=!1,i=void 0;try{for(var c,o=e.selections[Symbol.iterator]();!(a=(c=o.next()).done);a=!0){var s=c.value;if(s.toQuestion){if(t.includes(s.toQuestion))return n+1;t.push(s.toQuestion);var u=this.findMax(s.toQuestion,t);u>n&&(n=u)}}}catch(l){r=!0,i=l}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n+1}},{key:"findQuestionByID",value:function(e,t){return t.find(function(t){return t.qid===e})}},{key:"configQuestions",value:function(e){var t=this;e.forEach(function(n){n.selections.forEach(function(a){if(a.toQuestionID){var r=t.findQuestionByID(a.toQuestionID,e);void 0!==r&&(a.toQuestion=r,r.parent=n)}})})}},{key:"createQuestions",value:function(e,t){e.questions&&e.questions.forEach(function(e){var n=[];if(e.selections){var a=!0,r=!1,i=void 0;try{for(var c,o=e.selections[Symbol.iterator]();!(a=(c=o.next()).done);a=!0){var s=c.value;if(s.id){var u=new jt({title:s.title,sid:s.id,toQuestionID:s.to_question});n.push(u)}}}catch(d){r=!0,i=d}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}}if(e.id){var l=new vt({title:e.title,description:e.description,qid:e.id,image:e.image,selections:n});t.push(l)}})}}]),e}(),Ot=n(301),yt=n.n(Ot),Et=function(e){function t(){var e,n;Object(j.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r)))).state={},n.treeContainer=void 0,n}return Object(k.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this.treeContainer.getBoundingClientRect();this.setState({translate:{x:.5*e.width,y:.05*e.height}})}},{key:"render",value:function(){var e=this,t=this.state,n=t.position;t.qid;return i.a.createElement("div",{style:{overflowX:"hidden",height:"100%"},ref:function(t){return e.treeContainer=t}},i.a.createElement(yt.a,{data:this.props.data,translate:this.state.translate,orientation:"vertical",onClick:this.props.onClick}),n&&i.a.createElement(bt.a,{open:void 0!==n,anchorReference:"anchorPosition",anchorPosition:{top:n.y,left:n.x}},i.a.createElement(h.a,null,i.a.createElement("h4",null,"sadsadadsasd"))))}}]),t}(i.a.PureComponent);function wt(e){var t=Object(r.useContext)(Re).game,n=t&&t.toJSON(),a=Object(r.useState)(),c=Object(T.a)(a,2),o=c[0],s=c[1],u=new gt;return n&&!o&&u.build(n).then(function(){var e=Object(m.a)(d.a.mark(function e(t){var n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,t.toTreeData();case 3:n=e.sent,s(n);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){return console.log(e)}),i.a.createElement(A.a,{open:e.open,onClose:e.onClose,fullWidth:!0},i.a.createElement(W.a,{style:{height:"100vh"}},o&&i.a.createElement(Et,{data:o,onClick:function(e,t){console.log(t)}})),i.a.createElement(Ge.a,null,i.a.createElement(q.a,{onClick:function(){return e.onClose()}},"Close")))}var xt=n(302),kt=n.n(xt),St=n(602),Ct=Object(f.a)(function(e){return Object(ne.a)({root:{flexGrow:1,overflowY:"hidden",height:"100%"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},display:{padding:10},appbar:{top:0,height:300,zIndex:10},popup:{paddingLeft:60,zIndex:200}})}),Pt=Object(ae.a)({palette:{primary:le.a,secondary:de.a}});function Qt(e){var t=Ct(),n=Object(r.useContext)(Re),a=n.selectedSelectionPosition,c=n.game,o=n.fetch,u=Object(r.useState)(!1),l=Object(T.a)(u,2),d=l[0],m=l[1];c&&c.object&&c.object.id===parseInt(e.match.params.id)||o(parseInt(e.match.params.id));return i.a.createElement(re.a,{theme:Pt},i.a.createElement(ie.a,{color:"primary",elevation:0,className:t.appbar},i.a.createElement(ce.a,null,i.a.createElement(s.b,{to:"/home"},i.a.createElement(oe.a,{style:{color:"white"}},i.a.createElement(kt.a,null))),i.a.createElement(b.a,{variant:"h6",className:t.title},"Edit ",c&&c.object&&c.object.title))),a&&i.a.createElement(lt,null),!c&&i.a.createElement(St.a,null),c&&i.a.createElement(at,null),i.a.createElement(ht,null),i.a.createElement(be.a,{style:{zIndex:1e3,position:"fixed",right:10,top:10,color:"white"},onClick:function(){return m(!0)}},"Show Tree"),d&&i.a.createElement(wt,{open:d,onClose:function(){return m(!1)}}))}var Dt=Object(f.a)(function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}),It=[{name:"username",label:"User Name",readonly:!1,required:!0,widget:a.text},{name:"password",label:"Password",readonly:!1,required:!0,widget:a.text},{name:"password_confirm",label:"Password Confirm",readonly:!1,required:!0,widget:a.text}];function qt(){var e=Dt(),t=Object(r.useContext)($),n=t.errMsgs,a=i.a.createElement(p.a,{item:!0,xs:12,sm:8,md:5,component:h.a,elevation:6,square:!0},i.a.createElement("div",{className:e.paper},i.a.createElement(b.a,{component:"h1",variant:"h5"},"Sign Up"),i.a.createElement(F,{schemas:It,url:"",onSubmit:function(){var e=Object(m.a)(d.a.mark(function e(n){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Sign Upo"),e.next=3,t.signUp(n);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}),i.a.createElement(p.a,{container:!0},i.a.createElement(p.a,{item:!0},i.a.createElement(s.b,{to:"/"},i.a.createElement("div",null,'"Have a account? Sign In"'))),i.a.createElement(p.a,{item:!0,xs:12},function(){var e=[];for(var t in n.signUp)e.push(i.a.createElement(K.a,{key:t,negative:!0,header:"".concat(t),list:n.signUp[t]}));return e}()))));return i.a.createElement(p.a,{container:!0,component:"main",className:e.root},i.a.createElement(v.a,null),i.a.createElement(p.a,{item:!0,xs:!1,sm:4,md:7,className:e.image}),a)}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(X,null,i.a.createElement(function(){var e=Object(r.useContext)($).isLogin;return console.log(e),i.a.createElement(Ue,null,i.a.createElement(s.a,null,i.a.createElement("div",null,i.a.createElement(u.d,null,i.a.createElement(u.b,{exact:!0,path:"/",render:function(t){return e?i.a.createElement(u.a,{to:"/home"}):i.a.createElement(te,null)}}),i.a.createElement(u.b,{exact:!0,path:"/signUp",render:function(t){return e?i.a.createElement(u.a,{to:"/home"}):i.a.createElement(qt,null)}}),i.a.createElement(u.b,{exact:!0,path:"/home",render:function(t){return e?i.a.createElement(ke,null):i.a.createElement(u.a,{to:"/"})}}),i.a.createElement(u.b,{exact:!0,path:"/edit/:id",render:function(e){return i.a.createElement(Qt,e)}})))))},null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[331,1,2]]]);
//# sourceMappingURL=main.81ab21b9.chunk.js.map